<!DOCTYPE html>
<html>
<head>
    <title></title>
	<meta charset="utf-8" />
</head>
<body>
    <script src="libs/oidc/oidc-token-manager.min.js"></script>
    <script>
        var manager = new OidcTokenManager({
            // client id
            client_id: "angular",
            
            // redirect URI an den token geschickt wird
            redirect_uri: "https://localhost:44300/modal.html",

            // ein identity token soll zurückgeliefert werden
            response_type: "id_token token",

            // angefragte scopes
            scope: "openid user_data webapi",
            
            // basis-pfad zu identityserver (für discovery dokument)
            authority: "https://localhost:44345/",
            
            // zu Demonstrationszwecken: alle Claims speichern/anzeigen
            filter_protocol_claims: false
        });

        if (!window.location.hash) {
            manager.redirectForToken();
        }
        else {
            manager.processTokenCallbackAsync().then(function () {
                window.opener.onLogin();
            }, function (error) {
                console.log(error);
            });
        }
    </script>
</body>
</html>
